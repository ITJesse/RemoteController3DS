{"version":3,"sources":["../src/index.js"],"names":["oldbuttons","keymap","socket","win","count","init","setInterval","keypress","getKeyPress","newbuttons","code","get3DSKey","type","send"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,aAAa,IAAjB;AACA,MAAMC,SAAS,sBAAf;AACA,MAAMC,SAAS,sBAAf;;AAEA,MAAMC,MAAM,mBAAZ;AACA,IAAIC,QAAQ,CAAZ;AACAD,IAAIE,IAAJ;;AAEAC,YAAY,MAAM;AAChB,QAAMC,WAAWJ,IAAIK,WAAJ,EAAjB;AACA,MAAIC,aAAa,KAAjB;AACA,OAAK,MAAMC,IAAX,IAAmBH,QAAnB,EAA6B;AAC3BE,kBAAcR,OAAOU,SAAP,CAAiBD,IAAjB,CAAd;AACD;AACD,MAAI,iBAAOE,IAAP,KAAgB,KAApB,EAA2B;AACzB,QAAIZ,eAAeS,UAAnB,EAA+B;AAC7BP,aAAOW,IAAP,CAAYJ,UAAZ;AACAT,mBAAaS,UAAb;AACAL,cAAQ,CAAR;AACD,KAJD,MAIO,IAAIJ,eAAeS,UAAf,IAA6BL,QAAQ,CAAzC,EAA4C;AACjDF,aAAOW,IAAP,CAAYJ,UAAZ;AACAL;AACD;AACF,GATD,MASO;AACLF,WAAOW,IAAP,CAAYJ,UAAZ;AACD;AACF,CAlBD,EAkBG,CAlBH","file":"index.js","sourcesContent":["import Win from './win';\nimport Keymap from './keymap';\nimport Socket from './socket';\nimport config from './config';\n\nlet oldbuttons = 0x00;\nconst keymap = new Keymap();\nconst socket = new Socket();\n\nconst win = new Win();\nlet count = 0;\nwin.init();\n\nsetInterval(() => {\n  const keypress = win.getKeyPress();\n  let newbuttons = 0xfff;\n  for (const code of keypress) {\n    newbuttons -= keymap.get3DSKey(code);\n  }\n  if (config.type === 'ntr') {\n    if (oldbuttons !== newbuttons) {\n      socket.send(newbuttons);\n      oldbuttons = newbuttons;\n      count = 0;\n    } else if (oldbuttons === newbuttons && count < 5) {\n      socket.send(newbuttons);\n      count++;\n    }\n  } else {\n    socket.send(newbuttons);\n  }\n}, 5);\n"]}